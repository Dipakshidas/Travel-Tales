import React from "react";
import { Link, NavLink } from "react-router-dom";
import "./TravellerNavbar.css";

export default function TravellerNavbar({ onLogout }) {
  const DIRECT_GIF =
    "https://mir-s3-cdn-cf.behance.net/project_modules/source/59b73f47211133.5873edc005312.gif";

  const iframeDoc = `
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: transparent;
      }
      img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* fill the square, no letterbox */
        display: block;
      }
    </style>
  </head>
  <body>
    <img src="${DIRECT_GIF}" alt="" />
  </body>
</html>`.trim();

  return (
    <nav className="tnav" role="navigation" aria-label="Traveller navigation">
      <div className="tnav__inner">
        <div className="tnav__left">
          <Link
            to="/home"
            className="tnav__brand"
            aria-label="Go to Travel Tales home"
          >
            <span className="tnav__logoWrap logo-iframe-wrap" aria-hidden="true">
              <iframe
                title="Travel Tales Logo"
                className="tnav__logoFrame navbar__logo-iframe"
                srcDoc={iframeDoc}
                loading="eager"
                sandbox="" 
              />
            </span>

            <span className="tnav__title">Travel Tales</span>
          </Link>
        </div>

        <div className="tnav__center" aria-label="Signed in user">
          <span className="tnav__user" title="Signed in as traveller">
            <span className="tnav__avatar" aria-hidden="true">ðŸ‘¤</span>
            <span className="tnav__userTxt">
              <strong>
                
                <span className="tnav__role">Traveller</span>
              </strong>
            </span>
          </span>
        </div>

        <div className="tnav__right" role="menubar" aria-label="Primary">
          <NavLink
            to="/home"
            className={({ isActive }) => `tnav__link ${isActive ? "is-active" : ""}`}
            role="menuitem"
          >
            Home
          </NavLink>

         

          <button
            type="button"
            className="tnav__btn tnav__btn--light"
            onClick={onLogout ?? (() => alert("Logout clicked"))}
          >
            Logout
          </button>
        </div>
      </div>
    </nav>
  );
}
